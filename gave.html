<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="transparent" />
  <title>En gave til deg — Fra Marcus</title>
  <!-- Typografi (print-inspirert) -->
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@300;400;600&family=Newsreader:ital,wght@0,300;1,300&family=Raleway:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* ENDRET: basebakgrunn satt til ønsket farge */
      --paper:#729092; /* <- hovedbakgrunn */
      --ink:#111;
      --muted:#3D3A36;
      --muted-text: #2A2825; /* Mørkere for bedre kontrast */
      --maxw:1120px;
      --radius:10px;
      --shadow:0 12px 28px rgba(0,0,0,.12);
      --gap:26px;
      /* aksentpalett brukt i stripe og glimt */
      --acc-blue:#0073C6;
      --acc-red:#D93C3C;
      --acc-gold:#C9A66B;
      --acc-plum:#5B4A58;
      --acc-sky:#AEC6CF;
    }
    * { box-sizing:border-box; }
    html {
      background-color: #5f6d7a; /* Fallback color */
    }

    /* Breathing texture overlay */
    html::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="220" height="220"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.04"/></svg>');
      animation: breathing-texture 12s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes breathing-texture {
      0% { opacity: 0.03; }
      50% { opacity: 0.05; }
      100% { opacity: 0.03; }
    }

    body {
      margin: 0;
      color: var(--ink);
      font-family: "Inter", "Raleway", sans-serif; /* Added Raleway as fallback */
      line-height: 1.65;
      -webkit-font-smoothing: antialiased;
      position: relative;
      overflow-x: hidden;

      /* New vintage collage background */
      background-image: linear-gradient(to bottom, #b38a58, #5f6d7a);
      background-size: 100% 100vh;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    /* Mobil og redusert bevegelse */
    @media (max-width: 768px), (hover: none), (pointer: coarse) {
      body {
        animation: none;
      }
    }

    @media (max-width: 768px) {
      .gift-wrapper {
        padding: 2rem 0;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      /* Disable all animations for reduced motion */
      html::before,
      .background-animations .element,
      .drifting-particle,
      .gift-box,
      .gift-band,
      .plate {
        animation: none !important;
      }

      /* Handle the open state without animation */
      .gift-wrapper.opened .gift-box,
      .gift-wrapper.opened .gift-band {
        opacity: 0;
        visibility: hidden;
      }
      .revealed-frame {
        transition: none;
      }
      .gift-wrapper.opened .revealed-frame {
        opacity: 1;
        transform: scale(1);
      }

      /* Also disable the hover effect */
      .gift-box:hover {
        transform: none;
        box-shadow: 0 0 1px 1px rgba(0,0,0,0.1), 0 0 3px 2px rgba(0,0,0,0.05);
      }

      body::after {
        transition: none;
      }
      body.background-opened::after {
        opacity: 1;
      }
    }

    .container {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 48px 20px 24px;
      position: relative;
      z-index: 2;

      /* Legg til polstring for safe-areas (notch, home indicator) */
      padding-top: calc(48px + env(safe-area-inset-top, 0));
      padding-right: calc(20px + env(safe-area-inset-right, 0));
      padding-bottom: calc(24px + env(safe-area-inset-bottom, 0));
      padding-left: calc(20px + env(safe-area-inset-left, 0));
    }

    header.brev { padding-top:56px; text-align:center; position: relative; z-index: 2; }
    .brev h1 { font-family:"Archivo Black"; font-size:clamp(2rem,3.2vw,2.6rem); margin:0 0 12px; }
    .brev p { font-family:"Newsreader", serif; font-style:italic; color:var(--muted-text); max-width:70ch; margin:0 auto; }

    main {
      padding: 16px calc(20px + env(safe-area-inset-right, 0)) calc(72px + env(safe-area-inset-bottom, 0)) calc(20px + env(safe-area-inset-left, 0));
      position: relative;
      z-index: 2;
    }
    .grid { display:grid; gap:var(--gap); grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); max-width:var(--maxw); margin:0 auto; }

    /* Juster gap for mindre skjermer */
    @media (max-width: 768px) {
      :root {
        --gap: 16px;
      }
    }

    /* Kort med naturlig vind-bølge animasjon */
    .plate { display:block; border-radius:var(--radius); overflow:hidden; background:rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.08); box-shadow:var(--shadow); text-decoration:none; color:inherit; position:relative; transform:translateZ(0); transition:box-shadow .4s ease; will-change:transform; animation: wind 14s cubic-bezier(.45,.05,.35,.95) infinite; }
    .plate:hover { box-shadow:0 16px 32px rgba(0,0,0,.16); }
    .plate:focus-visible {
      box-shadow: 0 10px 20px rgba(0,0,0,.14);
      outline: 2px solid var(--acc-blue);
      outline-offset: 4px;
      border-radius: var(--radius); /* Ensure outline follows border radius */
    }
    .plate:nth-child(2n) { animation-delay:2.5s; }
    .plate:nth-child(3n) { animation-delay:5s; }
    @keyframes wind { 0%{ transform:translateY(0) rotate(0deg);} 25%{ transform:translateY(-6px) rotate(-0.25deg);} 50%{ transform:translateY(3px) rotate(0.2deg);} 75%{ transform:translateY(-4px) rotate(-0.15deg);} 100%{ transform:translateY(0) rotate(0deg);} }

    /* Ytelsesforbedringer for rendering */
    header.container, main, footer {
      content-visibility: auto;
    }

    .cover { width:100%; aspect-ratio:1/1; object-fit:cover; display:block; }

    footer {
      text-align: center;
      font-size: 1rem;
      padding: 0 calc(20px + env(safe-area-inset-right, 0)) calc(64px + env(safe-area-inset-bottom, 0)) calc(20px + env(safe-area-inset-left, 0));
      position: relative;
      z-index: 2;
    }
    .footer-note { font-family:"Inter", sans-serif; font-size:0.95rem; color:var(--muted); margin-bottom:12px; }
    .quote { max-width:800px; margin:0 auto; font-family:"Newsreader", serif; font-style:italic; font-size:1.1rem; line-height:1.9; color:var(--muted); text-align:center; }
    .quote strong { font-family:"Archivo Black", sans-serif; font-style:normal; font-size:1.15rem; margin:0 4px; color:var(--ink); }

    /* Stil for feil- og tomtilstand-meldinger */
    .error-message, .empty-message {
      color: var(--muted-text);
      background: rgba(255,255,255,.5);
      padding: 24px;
      border-radius: var(--radius);
      text-align: center;
      grid-column: 1 / -1; /* Sørger for at meldingen spenner over hele gridet */
      font-family: "Inter", sans-serif;
      font-style: italic;
    }

    /* New styles for the collage design will go here */
    .gift-wrapper {
      display: grid;
      place-items: center;
      position: relative;
      padding: 4rem 0;
      perspective: 1200px;
    }
    .gift-box {
      width: 280px;
      max-width: 90%;
      height: 350px;
      background-color: #5b5266; /* Lilla-brun */
      position: relative;
      cursor: pointer;
      display: grid;
      place-items: center;
      border-radius: 3px;
      box-shadow: 0 0 1px 1px rgba(0,0,0,0.1), 0 0 3px 2px rgba(0,0,0,0.05);
      transition: transform 0.4s, box-shadow 0.4s;
    }
    .gift-box:hover {
      transform: scale(1.02);
      box-shadow: 0 0 5px 2px rgba(255,255,255,0.05), 0 10px 20px rgba(0,0,0,0.2);
    }
    .gift-band {
      position: absolute;
      width: 80px;
      height: 100%;
      background-color: #c9a66b; /* Matt gull */
      display: grid;
      place-items: center;
      text-align: center;
    }
    .gift-text {
      font-family: "Newsreader", serif;
      font-style: italic;
      font-size: 1.1rem;
      color: #4a3f55; /* Deeper lilla-brun */
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }

    /* Drifting particles */
    .drifting-particle {
      position: absolute;
      transform-origin: center;
      animation: drift 15s ease-in-out infinite;
      opacity: 0;
    }
    @keyframes drift {
      0% { transform: translateY(0px) translateX(0px) rotate(0deg); opacity: 0.7; }
      50% { transform: translateY(-30px) translateX(20px) rotate(180deg); opacity: 0.3; }
      100% { transform: translateY(0px) translateX(0px) rotate(360deg); opacity: 0.7; }
    }

    /* --- Opening Animation --- */

    /* Background transition */
    body::after {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: linear-gradient(to bottom, #c7a270, #6a7f8f);
      opacity: 0;
      transition: opacity 1.5s 0.5s ease-in-out;
      z-index: -2;
    }
    body.background-opened::after {
      opacity: 1;
    }

    /* Gift unfolding animation */
    @keyframes unfold {
      0% { transform: rotateX(0) scale(1); }
      100% { transform: rotateX(-160deg) scale(0.8) translateY(-200px); opacity: 0; }
    }
    @keyframes fall-away {
      0% { transform: translateY(0) rotate(0); opacity: 1; }
      100% { transform: translateY(300px) rotate(25deg); opacity: 0; }
    }
    .gift-wrapper.opened .gift-box {
      animation: unfold 1.5s ease-in-out forwards;
    }
    .gift-wrapper.opened .gift-band {
      animation: fall-away 1.2s ease-in forwards;
    }

    /* Particle burst animation */
    @keyframes burst {
      0% { transform: scale(1); opacity: 0.7; }
      100% { transform: scale(3) translate(var(--burst-x), var(--burst-y)); opacity: 0; }
    }
    .gift-wrapper.opened .drifting-particle {
      animation: burst 1s ease-out forwards;
    }

    /* --- Revealed Frame Styles --- */
    .revealed-frame {
      position: absolute;
      width: 90%;
      max-width: 450px;
      background-color: #f5f1e8; /* Cream/beige */
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="220" height="220"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.02"/></svg>');
      border: 1px solid rgba(0,0,0,0.1);
      padding: 2.5rem;
      text-align: center;
      opacity: 0;
      transform: scale(0.9);
      pointer-events: none;
      box-shadow:
          -5px -5px 0px 0px rgba(91, 82, 102, 0.5),
          5px 5px 0px 0px rgba(91, 82, 102, 0.5);
      transition: opacity 0.6s 1.2s, transform 0.6s 1.2s;
    }
    .gift-wrapper.opened .revealed-frame {
      opacity: 1;
      transform: scale(1);
      pointer-events: auto;
    }
    .frame-content > * {
      margin-bottom: 1rem;
    }
    .frame-intro, .personal-message {
      font-family: "Inter", sans-serif;
      color: #333;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .festival-title {
      font-family: "Raleway", sans-serif;
      font-weight: 700;
      font-size: 1.8rem;
      color: #4a3f55;
    }
    .festival-details {
      font-family: "Inter", sans-serif;
      color: #555;
      font-size: 1rem;
    }
    .cta-button {
      display: inline-block;
      padding: 12px 24px;
      background-color: #5f6d7a; /* Matte blue */
      color: white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 700;
      transition: background-color 0.3s, transform 0.3s;
      margin-top: 1rem;
    }
    .cta-button:hover {
      background-color: #465A65;
      transform: scale(1.05);
    }

    /* Floating background elements */
    .background-animations {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .background-animations .element {
      position: absolute;
      opacity: 0;
      animation: float-and-fade 20s linear infinite;
      will-change: transform, opacity;
      background-size: contain;
      background-repeat: no-repeat;
    }
    @keyframes float-and-fade {
      0% { opacity: 0; transform: translateY(0) rotate(0deg); }
      10% { opacity: 0.6; }
      90% { opacity: 0.2; }
      100% { opacity: 0; transform: translateY(-20vh) rotate(360deg); }
    }
    .element.leaf1 {
      width: 60px; height: 60px;
      top: 15%; left: 5%;
      animation-delay: 0s;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50,0 C20,20 20,80 50,100 C80,80 80,20 50,0 Z M50,0 C60,50 50,100 50,100' fill='none' stroke='rgba(255,255,255,0.15)' stroke-width='5'/%3E%3C/svg%3E");
    }
    .element.note1 {
      width: 40px; height: 40px;
      top: 80%; left: 90%;
      animation-delay: 5s;
      animation-duration: 25s;
      background-image: url("data:image/svg+xml,%3Csvg fill='rgba(255,255,255,0.15)' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M452.3,0.5L185.2,67.3c-7.2,1.8-12.6,8.6-12.6,16.2v308.4c-14-8.4-31.3-13.5-50.1-13.5c-46,0-83.5,30-83.5,66.8s37.4,66.8,83.5,66.8s83.5-30,83.5-66.8V196.7l233.7-58.4v153.5c-14-8.4-31.3-13.5-50.1-13.5c-46,0-83.5,30-83.5,66.8s37.4,66.8,83.5,66.8s83.5-30,83.5-66.8V22.5C473,6,462.9-2.1,452.3,0.5z'/%3E%3C/svg%3E");
    }
    .element.leaf2 {
      width: 45px; height: 45px;
      top: 50%; left: 95%;
      animation-delay: 10s;
      animation-duration: 30s;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50,0 C20,20 20,80 50,100 C80,80 80,20 50,0 Z M50,0 C60,50 50,100 50,100' fill='none' stroke='rgba(255,255,255,0.15)' stroke-width='5'/%3E%3C/svg%3E");
      transform: rotate(45deg);
    }
    .element.note2 {
      width: 30px; height: 30px;
      top: 5%; left: 10%;
      animation-delay: 15s;
      animation-duration: 22s;
      background-image: url("data:image/svg+xml,%3Csvg fill='rgba(255,255,255,0.15)' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M452.3,0.5L185.2,67.3c-7.2,1.8-12.6,8.6-12.6,16.2v308.4c-14-8.4-31.3-13.5-50.1-13.5c-46,0-83.5,30-83.5,66.8s37.4,66.8,83.5,66.8s83.5-30,83.5-66.8V196.7l233.7-58.4v153.5c-14-8.4-31.3-13.5-50.1-13.5c-46,0-83.5,30-83.5,66.8s37.4,66.8,83.5,66.8s83.5-30,83.5-66.8V22.5C473,6,462.9-2.1,452.3,0.5z'/%3E%3C/svg%3E");
      transform: rotate(-15deg);
    }
  </style>
</head>
<body>
  <div class="background-animations">
    <span class="element leaf1"></span>
    <span class="element note1"></span>
    <span class="element leaf2"></span>
    <span class="element note2"></span>
  </div>
  <header class="brev container" aria-label="En gave til Athina">
    <h1>En gave til deg, Athina</h1>
    <p>Her er en liten gave til deg – en opplevelse vi kan glede oss til sammen. Klikk på gaven for å åpne den.</p>
  </header>

  <main class="container">
    <div class="gift-wrapper" id="giftWrapper">
      <div class="gift-box" id="gift" role="button" tabindex="0" aria-label="En gave, klikk for å åpne">
        <div class="gift-band">
            <span class="gift-text">En spesiell gave venter på deg</span>
        </div>
      </div>
      <div class="revealed-frame" id="revealedContent" hidden>
        <div class="frame-content">
            <p class="frame-intro">Her er en liten gave til deg - en opplevelse vi kan glede oss til sammen.</p>
            <img src="https://mnd-assets.mynewsdesk.com/image/upload/c_limit,dpr_auto,f_auto,q_auto:good,w_600/rtcpi1y9qk1o1t3bql2e8r" alt="Slottsfjell Logo" class="festival-logo" style="max-width: 120px; margin-bottom: 1rem;">
            <h2 class="festival-title">Slottsfjell 2026</h2>
            <p class="festival-details">9.-10. Juli 2026</p>
            <p class="festival-details">Slottsfjellet i Tønsberg</p>
            <p class="personal-message">Kjære Athina, tenk at vi skal oppleve dette sammen! Gleder meg til å skape nye minner med deg.</p>
            <a href="https://slottsfjell.no" target="_blank" rel="noopener" class="cta-button">Utforsk Festivalen</a>
        </div>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // New JavaScript for the collage design will go here
      const gift = document.getElementById('gift');
      const giftWrapper = document.getElementById('giftWrapper');

      createDriftingParticles();

      function openGift() {
        if (giftWrapper.classList.contains('opened')) return;
        giftWrapper.classList.add('opened');
        document.body.classList.add('background-opened');
        document.getElementById('revealedContent').removeAttribute('hidden');
      }

      gift.addEventListener('click', openGift);
      gift.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openGift();
        }
      });

      function createDriftingParticles() {
        if (!giftWrapper) return;
        const particleCount = 20;
        const colors = ['#b38a58', '#5f6d7a', '#c9a66b', '#6c5b7b', '#d4c9be'];

        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('span');
            particle.className = 'drifting-particle';

            const angle = Math.random() * 2 * Math.PI;
            const radius = 180 + Math.random() * 120;
            particle.style.left = `calc(50% + ${Math.cos(angle) * radius}px)`;
            particle.style.top = `calc(50% + ${Math.sin(angle) * radius}px)`;

            const size = 5 + Math.random() * 10;
            const randomShape = Math.random();
            if (randomShape > 0.66) {
                particle.style.width = '0';
                particle.style.height = '0';
                particle.style.borderLeft = `${size/2}px solid transparent`;
                particle.style.borderRight = `${size/2}px solid transparent`;
                particle.style.borderBottom = `${size}px solid ${colors[i % colors.length]}`;
            } else {
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.backgroundColor = colors[i % colors.length];
                if (randomShape > 0.33) {
                  particle.style.borderRadius = '50%';
                } else {
                  particle.style.borderRadius = '0 50% 0 50%';
                }
            }

            particle.style.animationDelay = `${Math.random() * 15}s`;
            particle.style.animationDuration = `${15 + Math.random() * 10}s`;

            const burstX = (Math.cos(angle) * 250) + 'px';
            const burstY = (Math.sin(angle) * 250) + 'px';
            particle.style.setProperty('--burst-x', burstX);
            particle.style.setProperty('--burst-y', burstY);

            giftWrapper.appendChild(particle);
        }
      }
    });
  </script>
</body>
</html>
